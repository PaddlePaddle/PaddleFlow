name: distributed_pipeline

entry_points:
  train:
    docker_env: registry.baidubce.com/paddle-operator/demo-wide-and-deep:v1
    command: ""
    parameters:
      epoch: 5
      model_path: ./output/{{PF_RUN_ID}}
      train_data: '{{preprocess.data_path}}'
    env:
      PF_JOB_TYPE: "distributed"
      PF_JOB_FRAMEWORK: "paddle"
      PF_JOB_MODE: PS
      PF_JOB_QUEUE_NAME: default-queue
      # PD_JOB 开头的env为 paddle framework 中定义的参数
      PD_JOB_ENTRY_POINT: ""
      PD_JOB_WORKER_FLAVOUR: flavour1
      PD_JOB_WORKER_REPLICAS: 2
      PD_JOB_WORKER_IMAGE: registry.baidubce.com/paddle-operator/demo-wide-and-deep:v1
      PD_JOB_PS_FLAVOUR: flavour1
      PD_JOB_PS_REPLICAS: 2
      PD_JOB_PS_IMAGE: registry.baidubce.com/paddle-operator/demo-wide-and-deep:v1
parallelism: 1